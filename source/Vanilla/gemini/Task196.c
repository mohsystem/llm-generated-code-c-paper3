// C implementation using pthreads and condition variables is more complex
// and requires careful management of shared resources.  Due to the increased
// complexity and potential for subtle race conditions, it is omitted here.
//  A simpler solution using semaphores (if available on the target platform)
// would be more manageable in C.
/* code here: */